<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Repeat experiment, reveal treatment effects from the potential outcomes, test within each block, summarize — reveal_po_and_test • manytestsr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Repeat experiment, reveal treatment effects from the potential outcomes, test within each block, summarize — reveal_po_and_test"><meta name="description" content="The function does hypothesis tests within blocks and then summarizes the results  of this testing across the blocks. It is designed for use by padj_test_fn."><meta property="og:description" content="The function does hypothesis tests within blocks and then summarizes the results  of this testing across the blocks. It is designed for use by padj_test_fn."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">manytestsr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2.7000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Repeat experiment, reveal treatment effects from the potential outcomes, test within each block, summarize</h1>

      <div class="d-none name"><code>reveal_po_and_test.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function does hypothesis tests within blocks and then summarizes the results  of this testing across the blocks. It is designed for use by padj_test_fn.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">reveal_po_and_test</span><span class="op">(</span></span>
<span>  <span class="va">idat</span>,</span>
<span>  <span class="va">bdat</span>,</span>
<span>  <span class="va">blockid</span>,</span>
<span>  <span class="va">trtid</span>,</span>
<span>  fmla <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">ybase</span>,</span>
<span>  <span class="va">y1var</span>,</span>
<span>  <span class="va">prop_blocks_0</span>,</span>
<span>  <span class="va">tau_fn</span>,</span>
<span>  <span class="va">tau_size</span>,</span>
<span>  <span class="va">pfn</span>,</span>
<span>  p_adj_method <span class="op">=</span> <span class="st">"fdr"</span>,</span>
<span>  afn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  splitfn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  splitby <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  thealpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  copydts <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  stop_splitby_constant <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ncores <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  return_details <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-idat">idat<a class="anchor" aria-label="anchor" href="#arg-idat"></a></dt>
<dd><p>Individual level data</p></dd>


<dt id="arg-bdat">bdat<a class="anchor" aria-label="anchor" href="#arg-bdat"></a></dt>
<dd><p>Data at the block level.</p></dd>


<dt id="arg-blockid">blockid<a class="anchor" aria-label="anchor" href="#arg-blockid"></a></dt>
<dd><p>A character name of the column in idat and bdat indicating the block.</p></dd>


<dt id="arg-trtid">trtid<a class="anchor" aria-label="anchor" href="#arg-trtid"></a></dt>
<dd><p>Is the name of the treatment numeric, (0,1), variable</p></dd>


<dt id="arg-fmla">fmla<a class="anchor" aria-label="anchor" href="#arg-fmla"></a></dt>
<dd><p>A formula with outcome~treatment assignment  where treatment assignment is a factor</p></dd>


<dt id="arg-ybase">ybase<a class="anchor" aria-label="anchor" href="#arg-ybase"></a></dt>
<dd><p>Is the potential outcome to control upon which the treatment effect will be built</p></dd>


<dt id="arg-y-var">y1var<a class="anchor" aria-label="anchor" href="#arg-y-var"></a></dt>
<dd><p>Is the name of the potential outcome to treatment</p></dd>


<dt id="arg-prop-blocks-">prop_blocks_0<a class="anchor" aria-label="anchor" href="#arg-prop-blocks-"></a></dt>
<dd><p>Is the proportion of blocks with no effects at all</p></dd>


<dt id="arg-tau-fn">tau_fn<a class="anchor" aria-label="anchor" href="#arg-tau-fn"></a></dt>
<dd><p>Is a function that turns ybase into the potential outcome under treatment — it is a treatment effect creating function.</p></dd>


<dt id="arg-tau-size">tau_size<a class="anchor" aria-label="anchor" href="#arg-tau-size"></a></dt>
<dd><p>Is the parameter for the tau_fn — like the true average effect size within a block.</p></dd>


<dt id="arg-pfn">pfn<a class="anchor" aria-label="anchor" href="#arg-pfn"></a></dt>
<dd><p>A function to produce pvalues — using idat.</p></dd>


<dt id="arg-p-adj-method">p_adj_method<a class="anchor" aria-label="anchor" href="#arg-p-adj-method"></a></dt>
<dd><p>Is an input to p.adjust like "fdr" or "holm" to use adjust_block_tests</p></dd>


<dt id="arg-afn">afn<a class="anchor" aria-label="anchor" href="#arg-afn"></a></dt>
<dd><p>NULL. Not used. Included here to enable same functions to call this function and reveal_po_and_test_siup</p></dd>


<dt id="arg-splitfn">splitfn<a class="anchor" aria-label="anchor" href="#arg-splitfn"></a></dt>
<dd><p>Must be null. Only exists so that we can use the same efffect creation and testing function for both approaches.</p></dd>


<dt id="arg-splitby">splitby<a class="anchor" aria-label="anchor" href="#arg-splitby"></a></dt>
<dd><p>Must be null. Only exists so that we can use the same efffect creation and testing function for both approaches.</p></dd>


<dt id="arg-thealpha">thealpha<a class="anchor" aria-label="anchor" href="#arg-thealpha"></a></dt>
<dd><p>Is the error rate for a given test (for cases where alphafn is NULL, or the starting alpha for alphafn not null)</p></dd>


<dt id="arg-copydts">copydts<a class="anchor" aria-label="anchor" href="#arg-copydts"></a></dt>
<dd><p>TRUE or FALSE. TRUE if using findBlocks standalone. FALSE if copied objects are being sent to findBlocks from other functions.</p></dd>


<dt id="arg-stop-splitby-constant">stop_splitby_constant<a class="anchor" aria-label="anchor" href="#arg-stop-splitby-constant"></a></dt>
<dd><p>FALSE (not used here because this algorithm does not split) is the algorithm should stop splitting when the splitting criteria is constant within set/parent or whether it should continue but split randomly.</p></dd>


<dt id="arg-ncores">ncores<a class="anchor" aria-label="anchor" href="#arg-ncores"></a></dt>
<dd><p>The number of cores or threads to use for the test statistic creation and possible permutation testing</p></dd>


<dt id="arg-return-details">return_details<a class="anchor" aria-label="anchor" href="#arg-return-details"></a></dt>
<dd><p>TRUE means that the function should return a list of
the original data ("detobj"), a summary of the results ("detresults"), and a
node level dataset  ("detnodes"). Default here is FALSE. Only use TRUE when
not using simulations.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>False positive proportion out of the tests across the blocks, The false discovery rate (proportion rejected of false nulls out of all rejections), the power of the adjusted tests across blocks (the proportion of correctly rejected hypotheses out of all correct hypotheses — in this case correct means non-null), and power of the unadjusted test (proportion correctly rejected out of  all correct hypothesis, but using unadjusted p-values).</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jake Bowers.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

